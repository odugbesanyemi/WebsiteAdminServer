import{o as n,c as l,a as e,_ as S,D,b as g,d as T,r as m,e as u,E as _,I as b,h as a,t as c,F as B,i as A,f as p,n as z,J as V}from"./index-d2762744.js";import{p as E}from"./pagination-172d70a3.js";import{p as N}from"./User-Profile-PNG-d107d593.js";import{r as M}from"./NewspaperIcon-20634b5d.js";import"./ChevronLeftIcon-e0555cea.js";function L(o,t){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})])}function U(o,t){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z","clip-rule":"evenodd"})])}function j(o,t){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})])}function q(o,t){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})])}const i=D(),H={components:{CheckCircleIcon:L,TrashIcon:U,NewspaperIcon:M,ChatBubbleOvalLeftEllipsisIcon:j,CheckIcon:q,Pagination:E},data(){return{categorySelected:"all",commentData:[],searchQuery:"",replyText:"",pagination:{currPage:0,limit:10}}},methods:{getAllComments(){g.get("https://bluvardadmin.onrender.com/comments").then(o=>{this.commentData=o.data}).catch(o=>{})},commentById(o){return this.commentData.filter(t=>t.id==o)},updateComment(o){g.post(`https://bluvardadmin.onrender.com/comments/update/${o}`,{status:"approved"}).then(t=>{this.getAllComments(),i.setToast("Success: Comment Approved")}).catch(t=>{i.setToast("Error!: could not complete request")})},delComment(o){g.post(`https://bluvardadmin.onrender.com/comments/delete/${o}`).then(t=>{this.getAllComments(),i.setToast("Success: Comment deleted")}).catch(t=>{i.setToast("Error!: could not complete request")})},replyComment(o,t){if(this.replyText){const x=T.get("userID");g.post("https://bluvardadmin.onrender.com/comments/reply",{comment:this.replyText,post_id:o,user_id:x,parent_id:t}).then(f=>{this.replyText="",this.getAllComments(),i.setToast("Success: Your reply has been saved")}).catch(f=>{i.setToast("Error!: could not complete request")})}else i.setToast("Error!: Comment cannot be empty")},chooseCurrPage(o){this.paginate.currPage=o},chooseItemsPerPage(o){this.paginate.itemsPerPage=o}},mounted(){this.getAllComments()},watch:{},computed:{pendingComment(){return this.commentData.filter(o=>o.status=="pending")},approvedComment(){return this.commentData.filter(o=>o.status=="approved")},filteredComments(){return this.categorySelected!="all"?this.commentData.filter(o=>o.status==this.categorySelected):this.commentData},dataCount(){return this.filteredComments.length}}},O={class:"min-h-screen bg-gray-50"},F={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-2"},R=e("div",{class:"title border-t border-l border-r p-3 bg-white"},[e("div",{class:"max-w-6xl mx-auto"},[e("p",{class:"font-medium text-lg text-gray-700"},"Comments"),e("p",{class:"py-2 text-slate-500 text-xs"},"Manage Post Comments")])],-1),J={class:""},Q={class:"flex w-full bg-white border-t border-b border-l border-r items-center justify-between relative overflow-auto"},Y={class:"flex flex-row"},G={class:"p-4 flex cursor-pointer relative transition-all"},K={key:0,class:"before:block before:absolute before:left-0 before:w-full before:border-b-2 before:bottom-0 before:border-gray-700 transition-all"},W={class:"border rounded-full px-2 mx-4"},X={class:"p-4 flex cursor-pointer relative transition-all"},Z={key:0,class:"before:block before:absolute before:left-0 before:w-full before:border-b-2 before:bottom-0 before:border-gray-700 transition-all"},$={class:"border rounded-full px-2 mx-4"},ee={class:"p-4 bg-white flex cursor-pointer relative"},te={key:0,class:"before:block before:absolute before:left-0 before:w-full before:border-b-2 before:bottom-0 before:border-gray-700 transition-all"},oe={class:"border rounded-full px-2 mx-4"},se={class:"mt-5"},re={class:"comments"},ne={class:""},le={class:"px-5"},ae={class:"flex gap-2 mt-5 px-4"},ce=e("img",{src:N,class:"w-7 h-7 border rounded-full",alt:""},null,-1),ie={class:""},de={class:"text-xs"},me={class:"rounded p-4 border border-dashed m-3"},pe={class:"md:flex text-gray-600 text-xs items-center md:w-5/12"},ue={class:"text-sm bg-gray-50 inline-block p-3 rounded"},he={key:0,class:"text-xs italic pt-2 text-gray-500"},ge={class:"px-5 footerBtns mt-2 border-t flex items-center gap-2 text-xs text-slate-700"},_e=["onClick","disabled"],be=["onClick"],xe={class:"text-xs hidden gap-1 items-center align-top border border-gray-800 rounded p-1 transition-all group-focus-within:flex"},fe=["onClick"],ve={key:0,class:"nodata bg-white border"},ye=e("h2",{class:"text-xl font-bold p-10 text-gray-700"},"No Data Available!",-1),Ce=[ye],we={class:"border"},ke=e("hr",{class:""},null,-1);function Ie(o,t,x,f,s,d){const v=m("NewspaperIcon"),y=m("CheckCircleIcon"),C=m("trashIcon"),w=m("ChatBubbleOvalLeftEllipsisIcon"),k=m("CheckIcon"),I=m("Pagination");return n(),l("div",O,[e("div",F,[R,e("div",J,[e("div",Q,[e("div",Y,[e("label",G,[s.categorySelected=="all"?(n(),l("span",K)):u("",!0),_(e("input",{type:"radio",name:"category",value:"all","onUpdate:modelValue":t[0]||(t[0]=r=>s.categorySelected=r),class:"hidden"},null,512),[[b,s.categorySelected]]),a("All "),e("span",W,c(s.commentData.length),1)]),e("label",X,[s.categorySelected=="pending"?(n(),l("span",Z)):u("",!0),_(e("input",{type:"radio",name:"category",value:"pending","onUpdate:modelValue":t[1]||(t[1]=r=>s.categorySelected=r),class:"hidden"},null,512),[[b,s.categorySelected]]),a("Pending "),e("span",$,c(d.pendingComment.length),1)]),e("label",ee,[s.categorySelected=="approved"?(n(),l("span",te)):u("",!0),_(e("input",{type:"radio",name:"category",value:"approved","onUpdate:modelValue":t[2]||(t[2]=r=>s.categorySelected=r),class:"hidden"},null,512),[[b,s.categorySelected]]),a("Approved "),e("span",oe,c(d.approvedComment.length),1)])])]),e("div",se,[e("div",re,[(n(!0),l(B,null,A(s.commentData.slice(s.pagination.currPage*s.pagination.limit,(s.pagination.currPage+1)*s.pagination.limit),(r,P)=>(n(),l("div",{class:"mt-2 border bg-white",key:P},[e("div",ne,[e("div",le,[e("div",ae,[ce,e("div",null,[e("p",ie,c(r.username),1),e("p",de,c(new Date(r.date_added).toLocaleString()),1)])]),e("div",me,[e("p",pe,[p(v,{class:"md:w-12 w-12 mr-2 md:py-2"}),a(" "+c(r.post_title),1)]),e("p",ue,c(r.comment),1),r.parent_id?(n(),l("p",he,"in reply to - "+c(d.commentById(r.parent_id)[0].comment),1)):u("",!0)])]),e("div",ge,[e("button",{onClick:h=>d.updateComment(r.id),class:z(["flex gap-2 items-center p-2",[r.status=="approved"?"text-green-600":"text-gray-500"]]),disabled:r.status=="approved"},[p(y,{class:"w-6"}),a(" Approved ")],10,_e),e("button",{onClick:h=>d.delComment(r.id),class:"flex gap-2 items-center text-red-600 h-full p-2"},[p(C,{class:"w-6"}),a(" Trash ")],8,be),e("button",{onClick:t[4]||(t[4]=()=>{}),class:"text-gray-600 flex gap-2 items-center group p-2"},[p(w,{class:"w-6"}),a("reply "),e("div",xe,[_(e("input",{type:"text",name:"",class:"rounded border-0 focus:ring-0 p-1 text-xs text-gray-500",id:"","onUpdate:modelValue":t[3]||(t[3]=h=>s.replyText=h),placeholder:"Enter Reply here"},null,512),[[V,s.replyText]]),e("button",{onClick:h=>d.replyComment(r.post_id,r.id),class:"px-2 rounded bg-gray-800 text-gray-50 h-full text-xs flex items-center"},[p(k,{class:"w-6 p-1 h-full"}),a("send ")],8,fe)])])])])]))),128)),s.commentData.length?(n(),l("div",ve,Ce)):u("",!0),e("div",we,[p(I,{modelValue:s.commentData,"onUpdate:modelValue":t[5]||(t[5]=r=>s.commentData=r),limit:s.pagination.limit,"curr-page":s.pagination.currPage,onPrevPage:t[6]||(t[6]=r=>s.pagination.currPage--),onNextPage:t[7]||(t[7]=r=>s.pagination.currPage++)},null,8,["modelValue","limit","curr-page"])])])])]),ke])])}const Ae=S(H,[["render",Ie]]);export{Ae as default};

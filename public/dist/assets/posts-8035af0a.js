import{o as a,c as l,a as e,_ as k,D,H as p,b as h,r as c,e as g,E as f,I as m,h as i,t as d,f as n,J as S,w as _,F as I,i as V,K as T}from"./index-d2762744.js";import{p as M}from"./pagination-172d70a3.js";import{r as A}from"./UsersIcon-5f224368.js";import{r as E}from"./EyeIcon-37d07741.js";import{r as U,a as B,b as N,c as j}from"./StarIcon-7804ba0b.js";import{r as z}from"./MagnifyingGlassIcon-c56e5513.js";import"./ChevronLeftIcon-e0555cea.js";function F(t,s){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})])}function q(t,s){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const y=D(),R={components:{UsersIcon:A,EyeIcon:E,StarIcon:U,ListBulletIcon:B,ArrowTrendingDownIcon:N,ArrowTrendingUpIcon:j,MagnifyingGlassIcon:z,EllipsisVerticalIcon:F,pagination:M,PlusIcon:q},data(){return{categorySelected:"all",postData:[],allPost:[],allPostCount:"",searchQuery:"",categoriesPosts:[],pagination:{currPage:0,limit:5}}},methods:{getAllPosts(){p.start(),h.get("https://bluvardadmin.onrender.com/getposts/all").then(t=>{this.postData=t.data,this.allPostCount=t.data.length,this.allPost=t.data,p.done()}).catch(t=>{})},searchbyTitle(){h.get(`https://bluvardadmin.onrender.com/searchPostByTitle?query=${this.searchQuery}`,{status:this.categorySelected}).then(t=>{this.postData=t.data}).catch(t=>{})},removePost(t){p.start(),h.get(`https://bluvardadmin.onrender.com/post/remove/${t}`,this.posts).then(s=>{this.pageError=s.data.message,this.getAllPosts(),p.done(),y.setToast("Post removed Successfully.")}).catch(s=>{y.setToast(s.response.data)})},async getCategoryPosts(){if(this.$route.query.category){const t=await h.get("https://bluvardadmin.onrender.com/categories_hasCategories");this.categoriesPosts=t.data,this.postData=this.categoryFilterResult,this.allPost=this.categoryFilterResult,this.allPostCount=this.categoryFilterResult.length}},chooseCurrPage(t){this.pagination.currPage=t},chooseItemsPerPage(t){this.pagination.itemsPerPage=t}},mounted(){this.getAllPosts(),this.getCategoryPosts()},watch:{categorySelected:function(t,s){t!=="all"?t=="published"?this.postData=this.publishedPostCount:this.postData=this.draftPostCount:this.getAllPosts()}},computed:{publishedPostCount:function(){return this.allPost.filter(t=>t.post_status=="published")},draftPostCount:function(){return this.allPost.filter(t=>t.post_status=="draft")},selectedCategory:function(){return this.categoriesPosts.filter(t=>t.title==this.$route.query.category)},categoryFilterResult:function(){return this.postData.filter(t=>t.id==this.selectedCategory[0].post_id)},dataCount(){return this.postData.length}}},Q={class:"min-h-screen bg-gray-50"},G={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-2"},L=e("div",{class:"title p-3 bg-white border-t border-l border-r"},[e("div",{class:"max-w-6xl mx-auto"},[e("p",{class:"text-lg text-gray-700 font-medium"},"POSTS "),e("p",{class:"py-2 text-slate-600 text-xs"},"Create, edit and manage the posts on your site")])],-1),H={class:""},J={class:"flex w-full bg-white border-b border-l border-r border-t items-center justify-between relative overflow-auto"},K={class:"flex flex-row"},O={class:"p-4 flex cursor-pointer relative transition-all"},W={key:0,class:"before:block before:absolute before:left-0 before:w-full before:border-b-2 before:bottom-0 before:border-gray-500 transition-all"},X={class:"border rounded-full px-2 mx-4"},Y={class:"p-4 flex cursor-pointer relative transition-all"},Z={key:0,class:"before:block before:absolute before:left-0 before:w-full before:border-b-2 before:bottom-0 before:border-gray-500 transition-all"},$={class:"border rounded-full px-2 mx-4"},ee={class:"p-4 bg-white flex cursor-pointer relative"},te={key:0,class:"before:block before:absolute before:left-0 before:w-full before:border-b-2 before:bottom-0 before:border-gray-500 transition-all"},oe={class:"border rounded-full px-2 mx-4"},se={for:"search",class:"searchbtn md:pr-10 cursor-pointer transition-all flex gap-4 items-center group"},re={class:"mt-5 border bg-white"},ae={class:"header py-1 bg-white flex justify-between md:px-10 px-5 border-b items-center"},le=e("p",{class:"py-3 font-medium text-2xl"},"Posts",-1),ne={class:"border-gray-700 border hover:border-gray-400 rounded transition-all p-2 px-3 text-gray-700 text-xs"},ie={class:"posts"},de={class:"py-2 w-full"},ce={class:"text-sm py-3 md:w-10/12 text-black text-2xl whitespace-normal"},ue={class:"text-xs p-1 rounded px-2 border inline-block"},pe={class:"px-2 bg-gray-600 text-gray-50 rounded ml-3"},he={class:"group"},ge={class:"dropdown absolute rounded-lg -right-5 border top-18 transition-all bg-white shadow w-40 p-2 group-hover:block hidden z-10"},fe=e("span",{class:"before:absolute before:-z-10 before:w-6 before:h-6 before:bg-white before:-top-3 before:left-1/2 before:rotate-45 before:border-l before:border-t"},null,-1),be={class:"z-20"},me=e("button",{to:"/",class:"p-2 w-full hover:bg-gray-50 rounded-md hover:shadow"},"View",-1),_e=["onClick"],ye=e("hr",null,null,-1),xe={key:0,class:"nodata"},we=e("h2",{class:"text-xl font-bold p-10"},"No Data Available!",-1),ve=[we],Pe=e("hr",{class:"mt-16"},null,-1);function Ce(t,s,ke,De,o,u){const x=c("MagnifyingGlassIcon"),w=c("PlusIcon"),b=c("router-link"),v=c("EllipsisVerticalIcon"),P=c("pagination");return a(),l("div",Q,[e("div",G,[L,e("div",H,[e("div",J,[e("div",K,[e("label",O,[o.categorySelected=="all"?(a(),l("span",W)):g("",!0),f(e("input",{type:"radio",name:"category",value:"all","onUpdate:modelValue":s[0]||(s[0]=r=>o.categorySelected=r),class:"hidden"},null,512),[[m,o.categorySelected]]),i("All "),e("span",X,d(o.allPostCount),1)]),e("label",Y,[o.categorySelected=="published"?(a(),l("span",Z)):g("",!0),f(e("input",{type:"radio",name:"category",value:"published","onUpdate:modelValue":s[1]||(s[1]=r=>o.categorySelected=r),class:"hidden"},null,512),[[m,o.categorySelected]]),i("Published "),e("span",$,d(u.publishedPostCount.length),1)]),e("label",ee,[o.categorySelected=="draft"?(a(),l("span",te)):g("",!0),f(e("input",{type:"radio",name:"category",value:"draft","onUpdate:modelValue":s[2]||(s[2]=r=>o.categorySelected=r),class:"hidden"},null,512),[[m,o.categorySelected]]),i("Drafts "),e("span",oe,d(u.draftPostCount.length),1)])]),e("div",null,[e("label",se,[n(x,{class:"w-6 h-6 transition-all"}),f(e("input",{type:"search",name:"",placeholder:"Search posts",class:"opacity-0 w-0 group-focus-within:w-full max-md:group-focus-within:absolute max-md:group-focus-within:inset-0 max-md:group-focus-within:bg-opacity-40 max-md:group-focus-within:top-1/2 max-md:group-focus-within:-translate-y-1/2 max-md:group-focus-within:w-10/12 max-md:group-focus-within:ml-5 transition-all group-focus-within:opacity-100 duration-500 rounded focus:border-slate-400 focus:ring-0 focus:outline-0",id:"search","onUpdate:modelValue":s[3]||(s[3]=r=>o.searchQuery=r),onChange:s[4]||(s[4]=r=>u.searchbyTitle())},null,544),[[S,o.searchQuery]])])])]),e("div",re,[e("div",ae,[le,e("button",ne,[n(b,{to:{path:"/choose-templates"},class:"flex gap-2"},{default:_(()=>[n(w,{class:"w-4 mr-2"}),i(" New Post")]),_:1})])]),e("div",ie,[(a(!0),l(I,null,V(o.postData.slice(o.pagination.currPage*o.pagination.limit,(o.pagination.currPage+1)*o.pagination.limit),(r,C)=>(a(),l("div",{class:"",key:C},[e("div",null,[n(b,{to:{path:"/post",query:{action:"edit",pid:r.id}},class:"flex justify-between px-5 md:px-10 relative items-center"},{default:_(()=>[e("div",de,[e("h2",ce,d(r.post_title?r.post_title:"Untitled"),1),e("p",ue,[i(d(new Date(r.post_modified).toDateString())+" ",1),e("span",pe,d(r.type),1)])]),e("div",he,[n(v,{class:"w-6"}),e("div",ge,[fe,e("div",be,[n(b,{to:{path:"/post",query:{action:"edit",type:"blog",pid:r.id}},class:"p-2 hover:bg-gray-50 rounded-md hover:shadow text-center align-middle flex w-full justify-center"},{default:_(()=>[i("Edit")]),_:2},1032,["to"]),me,e("button",{to:"/",class:"p-2 w-full hover:bg-gray-50 rounded-md hover:shadow",onClick:T(Se=>u.removePost(r.id),["prevent"])},"Trash",8,_e)])])])]),_:2},1032,["to"])]),ye]))),128)),o.postData.length?g("",!0):(a(),l("div",xe,ve)),n(P,{modelValue:o.postData,"onUpdate:modelValue":s[5]||(s[5]=r=>o.postData=r),limit:o.pagination.limit,"curr-page":o.pagination.currPage,onPrevPage:s[6]||(s[6]=r=>o.pagination.currPage--),onNextPage:s[7]||(s[7]=r=>o.pagination.currPage++)},null,8,["modelValue","limit","curr-page"])])])]),Pe])])}const Be=k(R,[["render",Ce]]);export{Be as default};

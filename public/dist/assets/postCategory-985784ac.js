import{_ as T,D as k,b as d,r as c,o as i,c as l,a as e,f as p,E as A,J as O,F as b,i as E,e as u,g as I,h as f,t as y,w as V,K as _}from"./index-d2762744.js";import{n as N}from"./categoryModal-a815ff36.js";import{r as M}from"./UsersIcon-5f224368.js";import{r as P}from"./EyeIcon-37d07741.js";import{r as S,a as j,b as B,c as z}from"./StarIcon-7804ba0b.js";import{r as G,a as Q}from"./MagnifyingGlassIcon-ccde55fc.js";const h=k(),U={components:{UsersIcon:M,EyeIcon:P,StarIcon:S,ListBulletIcon:j,ArrowTrendingDownIcon:B,ArrowTrendingUpIcon:z,MagnifyingGlassIcon:G,EllipsisVerticalIcon:Q,newCategoryModal:N},data(){return{categorySelected:"published",modalOpened:!1,categoryData:[],searchQuery:"",categoryAction:"",newCategoryData:{title:"",description:""},selectedCategory:"",categoriesPosts:[],modalTitle:"Add New Category"}},methods:{getCategories(){d.get("https://bluvardadmin.onrender.com/categories").then(s=>{this.categoryData=s.data}).catch(s=>{})},searchbyTitle(){d.get(`https://bluvardadmin.onrender.com/search/categories?query=${this.searchQuery}`).then(s=>{this.categoryData=s.data}).catch(s=>{})},AddCategory(){this.categoryAction="Add Category",this.selectedCategory="",this.newCategoryData.title="",this.newCategoryData.description="",this.modalOpened=!this.modalOpened,this.modalTitle="Add New Category"},EditCategory(s,o,r){this.categoryAction="Edit Category",this.selectedCategory=s,this.newCategoryData.title=o,this.newCategoryData.description=r,this.modalOpened=!this.modalOpened,this.modalTitle="Edit Category"},addNewCategory(s,o){const r=this.selectedCategory?this.selectedCategory:"";d.post(`https://bluvardadmin.onrender.com/categories?id=${r}`,{title:s,description:o,description:o}).then(g=>{this.modalOpened=!this.modalOpened,this.newCategoryData.title="",this.newCategoryData.description="",this.getCategories(),h.setToast("New category added.")}).catch(g=>{h.setToast(g.response.data)})},viewCategory(){this.modalOpened=!this.modalOpened},removeCategory(s){confirm("Do you want to Continue?")&&d.get(`https://bluvardadmin.onrender.com/categories/remove/${s}`).then(r=>{this.modalOpened=!this.modalOpened,this.getCategories(),h.setToast("Category removed successfully.")}).catch(r=>{h.setToast(r.response.data)})},async getCategoryPosts(){const s=await d.get("https://bluvardadmin.onrender.com/categories-has-posts");this.categoriesPosts=s.data},getPostCount(s){return this.categoriesPosts.filter(r=>r.category_id==s).length}},mounted(){this.getCategories(),this.getCategoryPosts()}},$={class:"min-h-screen bg-gray-50"},q={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-5"},F=e("div",{class:"title p-3 bg-white border-r border-l border-t"},[e("div",{class:"max-w-6xl mx-auto"},[e("p",{class:"font-bold text-lg"},"CATEGORY"),e("p",{class:"py-2 text-slate-500 text-sm"},"Create, edit and manage the categories on your site")])],-1),K={class:""},L={class:"w-full flex bg-white border items-center justify-between relative"},J={class:"w-full searchbtn md:py-2 px-3 flex items-center gap-2 group focus-within:ring transition-all"},R={class:"mt-5 border bg-white"},Y=e("div",{class:"header py-1 bg-white flex justify-between px-10 max-md:px-5 border-b items-center"},[e("p",{class:"py-3"},"Categories")],-1),H={class:"posts"},W=["onClick"],X={class:"py-3"},Z={class:"text-xl py-1 text-black/80"},ee={class:"mx-3 border rounded-full bg-white px-2 text-xs"},te={class:"text-xs text-slate-500"},oe={class:"group"},se={class:"dropdown absolute rounded-lg -right-5 border top-18 transition-all bg-white shadow w-40 p-2 group-hover:block hidden z-10"},ae=e("span",{class:"before:absolute before:-z-10 before:w-6 before:h-6 before:bg-white before:-top-3 before:left-1/2 before:rotate-45 before:border-l before:border-t"},null,-1),re={class:"z-20"},ne=["onClick"],ie=["onClick"],de=e("hr",null,null,-1),le={key:0,class:"nodata"},ce=e("h2",{class:"text-xl font-bold p-10"},"No Data Available!",-1),he=[ce],ge=e("hr",{class:"mt-16"},null,-1);function pe(s,o,r,g,a,n){const w=c("MagnifyingGlassIcon"),C=c("EllipsisVerticalIcon"),v=c("router-link"),x=c("newCategoryModal");return i(),l(b,null,[e("div",$,[e("div",q,[F,e("div",K,[e("div",L,[e("div",J,[p(w,{class:"w-6 h-6"}),A(e("input",{type:"search",placeholder:"Search",onKeyup:o[0]||(o[0]=(...t)=>n.searchbyTitle&&n.searchbyTitle(...t)),"onUpdate:modelValue":o[1]||(o[1]=t=>a.searchQuery=t),class:"w-full h-full border-0 focus:outline-none focus:border-none focus:ring-0"},null,544),[[O,a.searchQuery]])]),e("button",{class:"flex w-36 h-full min-h-full bg-slate-400 p-2 text-center md:p-5 text-white",onClick:o[2]||(o[2]=(...t)=>n.AddCategory&&n.AddCategory(...t))}," Add New")]),e("div",R,[Y,e("div",H,[(i(!0),l(b,null,E(a.categoryData,(t,D)=>(i(),l("div",{class:"hover:bg-gray-50",key:D},[e("div",{class:"flex justify-between px-5 md:px-10 relative items-center cursor-pointer",onClick:m=>n.EditCategory(t.id,t.title,t.description)},[e("div",X,[e("h2",Z,[f(y(t.title)+" ",1),e("span",ee,y(n.getPostCount(t.id)),1)]),e("p",te,y(new Date(t.date_added).toDateString()),1)]),e("div",oe,[p(C,{class:"w-6"}),e("div",se,[ae,e("div",re,[p(v,{to:{path:"/post",query:{action:"edit",type:"blog",pid:t.id}},class:"p-2 hover:bg-gray-50 rounded-md hover:shadow text-center align-middle flex w-full justify-center"},{default:V(()=>[f("Edit")]),_:2},1032,["to"]),n.getPostCount(t.id)?(i(),l("button",{key:0,onClick:_(m=>this.$router.push("/posts?category="+t.title),["prevent"]),class:"p-2 flex w-full justify-center hover:bg-gray-50 rounded-md hover:shadow"},"View Posts",8,ne)):u("",!0),e("button",{class:"p-2 w-full hover:bg-gray-50 rounded-md hover:shadow",onClick:_(m=>n.removeCategory(t.id),["prevent"])},"Delete",8,ie)])])])],8,W),de]))),128)),a.categoryData.length?u("",!0):(i(),l("div",le,he))])])]),ge])]),a.modalOpened?(i(),I(x,{key:0,class:"z-20",modelValue:a.newCategoryData,"onUpdate:modelValue":o[3]||(o[3]=t=>a.newCategoryData=t),action:a.categoryAction,modalTitle:a.modalTitle,onSaveData:n.addNewCategory,onCloseModal:o[4]||(o[4]=t=>a.modalOpened=!a.modalOpened)},null,8,["modelValue","action","modalTitle","onSaveData"])):u("",!0)],64)}const we=T(U,[["render",pe]]);export{we as default};

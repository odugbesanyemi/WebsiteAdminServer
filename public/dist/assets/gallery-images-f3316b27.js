import{o as a,c as l,a as t,_ as I,b as m,r as p,h as x,f as h,F as _,i as f,E as $,N as k,D as C,H as i,t as u,e as b}from"./index-d2762744.js";import{d as N}from"./documentIcon-3fbcb264.js";import{r as S}from"./XMarkIcon-360d76fa.js";function M(e,s){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})])}const A={components:{XMarkIcon:S},data(){return{allImages:[],selectedImage:[],documentImage:N}},methods:{getAllImages(){m.get("https://bluvardadmin.onrender.com/files").then(e=>{this.allImages=e.data})},showimage(e){return"https://bluvard.org/assets/"+e}},mounted(){this.getAllImages()},computed:{getImages(){return this.allImages.map(e=>"https://bluvard.org/assets/"+e)}},updated(){const e=this.selectedImage;this.$emit("chooseImage",e)}},G={class:"border"},T={class:"border-b p-3 w-full flex items-center justify-between"},B={class:"p-3 grid grid-cols-5 max-md:grid-cols-2 gap-2 h-72 overflow-y-auto"},L=["for"],V=["id","value"],j=["src","alt"];function D(e,s,y,w,o,c){const g=p("XMarkIcon");return a(),l("div",G,[t("div",T,[x("All Images "),h(g,{class:"h-full w-6 bg-white rounded-full p-1 text-red-400 font-bold shadow cursor-pointer",onClick:s[0]||(s[0]=n=>e.$emit("close"))})]),t("div",B,[(a(!0),l(_,null,f(o.allImages,(n,r)=>(a(),l("label",{for:r,key:r,class:"relative border max-h-40"},[$(t("input",{type:"checkbox",id:r,class:"z-10 w-7 h-7 rounded-lg absolute top-3 left-3",value:n.file_name,"onUpdate:modelValue":s[1]||(s[1]=v=>o.selectedImage=v)},null,8,V),[[k,o.selectedImage]]),t("img",{src:n.mime_type.split("/")[0]=="image"?c.showimage(n.file_name):o.documentImage,alt:n,class:"h-full object-cover object-left hover:opacity-70"},null,8,j)],8,L))),128))])])}const q=I(A,[["render",D]]),d=C(),X={components:{selectMultipleImages:q,ChevronLeftIcon:M},data(){return{images:[],imageSelector:{opened:!1},selectedImages:[]}},methods:{async getGalleryImages(){try{const e=this.$route.params.id;if(e){const s=await m.get(`https://bluvardadmin.onrender.com/gallery/${e}`);this.images=s.data}else this.$router.go(-1)}catch{}},selectImages(e){this.selectedImages=e},async addImages(){if(i.start(),this.selectedImages.length)try{const e=this.$route.params.id,s=await m.post(`https://bluvardadmin.onrender.com/gallery/${e}`,this.imgName);d.setToast("success: Images Added to Gallery"),this.imageSelector.opened=!1,this.getGalleryImages(),i.done()}catch{}else d.setToast("Warning! Choose an image"),i.done()},async deleteImage(e){if(i.start(),confirm("Are you sure?"))try{const s=await m.post(`https://bluvardadmin.onrender.com/gallery/delete/${e}`);this.getGalleryImages(),d.setToast("Success: Image removed from category"),i.done()}catch{d.setToast("erorr: Could not perform action"),i.done()}else return i.done(),0}},mounted(){this.getGalleryImages(),document.title=`${this.$route.query.category} | Manage Gallery`},computed:{headerName(){return this.$route.query.category},imgName(){return this.selectedImages.map(e=>"https://bluvard.org/assets/"+e)}}},z={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-5"},E={class:"title p-3 bg-white border"},F={class:"relative flex items-center"},H={class:"w-full text-center"},U={class:"text-sm w-full text-center"},W={class:"mt-4 md:p-10 p-5 border bg-white"},J={class:"grid grid-cols-5 max-md:grid-cols-2 gap-2"},K={class:"group overflow-hidden relative border rounded bg-white p-2"},O=["src"],P=["onClick"],Q={key:0,class:"grid grid-cols-4 gap-2"},R={src:"",class:"border rounded animate-pulse bg-white p-2",alt:""},Y=t("p",{class:"p-2 text-xl"},"No data Here",-1),Z=t("hr",{class:"mt-16"},null,-1),ee={key:0,class:"fixed inset-0 p-10 top-10"},te=t("span",{class:"w-full h-full bg-black/10 -z-10 fixed inset-0"},null,-1),se={class:"relative max-w-6xl mx-auto"},oe={class:"bg-white p-2 flex gap-3 items-center border"},re={class:"text-slate-500 italics text-sm"};function ae(e,s,y,w,o,c){const g=p("ChevronLeftIcon"),n=p("selectMultipleImages");return a(),l("div",z,[t("div",E,[t("div",F,[t("button",{class:"flex items-center hover:bg-slate-50 inset-0",onClick:s[0]||(s[0]=r=>e.$router.go(-1))},[h(g,{class:"w-5 mr-3"}),x("Back ")]),t("div",H,[t("p",U,u(this.$route.query.category),1)]),t("button",{onClick:s[1]||(s[1]=r=>o.imageSelector.opened=!o.imageSelector.opened),class:"px-3 py-1 rounded bg-gradient-to-t from-orange-500 to-orange-400 text-orange-50 whitespace-nowrap"},"Add New")])]),t("div",W,[t("div",null,[t("div",null,[t("div",J,[(a(!0),l(_,null,f(o.images,r=>(a(),l("div",K,[t("img",{src:r.img_name,class:"",alt:""},null,8,O),t("span",{onClick:v=>c.deleteImage(r.id),class:"bottom-0 cursor-pointer bg-red-500 w-full text-sm text-red-50 py-1 text-center absolute transition-all left-0 hidden group-hover:block"},"Delete",8,P)]))),256))])]),o.images.length?b("",!0):(a(),l("div",Q,[(a(),l(_,null,f(10,r=>t("img",R)),64)),Y]))])]),Z,o.imageSelector.opened?(a(),l("div",ee,[te,t("div",se,[h(n,{class:"bg-white top-10",onClose:s[2]||(s[2]=r=>o.imageSelector.opened=!o.imageSelector.opened),onChooseImage:c.selectImages},null,8,["onChooseImage"]),t("div",oe,[t("button",{class:"bg-green-500 text-green-50 rounded px-3 py-1 hover:bg-green-400",onClick:s[3]||(s[3]=r=>c.addImages())},"Continue"),t("p",re,u(o.selectedImages.length)+" image"+u(o.selectedImages.length>1?"s":"")+" selected",1)])])])):b("",!0)])}const ce=I(X,[["render",ae]]);export{ce as default};

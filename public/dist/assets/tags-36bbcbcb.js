import{_ as C,D as k,b as l,r as c,o as d,c as i,a as e,f as u,E as O,J as A,F as f,i as I,e as p,g as V,h as _,t as m,w as E,K as w}from"./index-d2762744.js";import{n as N}from"./categoryModal-a815ff36.js";import{r as M}from"./UsersIcon-5f224368.js";import{r as P}from"./EyeIcon-37d07741.js";import{r as S,a as j,b as B,c as $}from"./StarIcon-7804ba0b.js";import{r as Q,a as U}from"./MagnifyingGlassIcon-ccde55fc.js";const g=k(),z={components:{UsersIcon:M,EyeIcon:P,StarIcon:S,ListBulletIcon:j,ArrowTrendingDownIcon:B,ArrowTrendingUpIcon:$,MagnifyingGlassIcon:Q,EllipsisVerticalIcon:U,newCategoryModal:N},data(){return{tagsSelected:"published",modalOpened:!1,tagsData:[],searchQuery:"",tagsAction:"",newTagsData:{title:"",description:""},selectedTags:"",tagsPosts:[]}},methods:{getTags(){l.get("https://bluvardadmin.onrender.com/tags").then(o=>{this.tagsData=o.data}).catch(o=>{})},searchbyTitle(){l.get(`https://bluvardadmin.onrender.com/search/tags?query=${this.searchQuery}`).then(o=>{this.tagsData=o.data}).catch(o=>{})},AddTags(){this.tagsAction="Add Tags",this.selectedTags="",this.newTagsData.title="",this.newTagsData.description="",this.modalOpened=!this.modalOpened},EditTags(o,s,n){this.tagsAction="Edit Tags",this.selectedTags=o,this.newTagsData.title=s,this.newTagsData.description=n,this.modalOpened=!this.modalOpened},addNewTags(o,s){const n=this.selectedTags?this.selectedTags:"";l.post(`https://bluvardadmin.onrender.com/tags?id=${n}`,{title:o,description:s,description:s}).then(h=>{this.modalOpened=!this.modalOpened,this.newTagsData.title="",this.newTagsData.description="",this.getTags(),g.setToast("New tag added successfully")}).catch(h=>{g.setToast(h.response.data)})},viewTags(){this.modalOpened=!this.modalOpened},removeTags(o){confirm("Do you want to Continue?")&&l.get(`https://bluvardadmin.onrender.com/tags/remove/${o}`).then(n=>{this.modalOpened=!this.modalOpened,this.getTags(),g.setToast("Tag successfully removed.")}).catch(n=>{g.setToast(n.response.data)})},async getTagsPosts(){const o=await l.get("https://bluvardadmin.onrender.com/tags-has-posts");this.tagsPosts=o.data},getPostCount(o){return this.tagsPosts.filter(n=>n.tags_id==o).length}},mounted(){this.getTags(),this.getTagsPosts()},computed:{}},G={class:"min-h-screen bg-gray-50"},q={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-5"},F=e("div",{class:"title p-3 bg-white border-t border-l border-r"},[e("div",{class:"max-w-6xl mx-auto"},[e("p",{class:"font-bold text-lg"},"Tags"),e("p",{class:"py-2 text-slate-500 text-sm"},"Create, edit and manage the Tags on your site")])],-1),K={class:""},L={class:"w-full flex bg-white border items-center justify-between relative"},J={class:"w-full searchbtn md:py-3 px-3 flex items-center gap-2 group focus-within:ring transition-all"},H={class:"mt-5 border bg-white"},R=e("div",{class:"header py-1 bg-white flex justify-between px-10 max-md:px-5 border-b items-center"},[e("p",{class:"py-3"},"Tags")],-1),W={class:"posts"},X=["onClick"],Y={class:"py-3"},Z={class:"text-xl py-1 text-black/80"},ee={class:"mx-3 border rounded-full bg-white px-2 text-xs"},te={class:"text-xs text-slate-500"},se={class:"group"},oe={class:"dropdown absolute rounded-lg -right-5 border top-18 transition-all bg-white shadow w-40 p-2 group-hover:block hidden z-10"},ae=e("span",{class:"before:absolute before:-z-10 before:w-6 before:h-6 before:bg-white before:-top-3 before:left-1/2 before:rotate-45 before:border-l before:border-t"},null,-1),ne={class:"z-20"},re=["onClick"],de=["onClick"],le=e("hr",null,null,-1),ie={key:0,class:"nodata"},ce=e("h2",{class:"text-xl font-bold p-10"},"No Data Available!",-1),ge=[ce],he=e("hr",{class:"mt-16"},null,-1);function ue(o,s,n,h,a,r){const v=c("MagnifyingGlassIcon"),T=c("EllipsisVerticalIcon"),x=c("router-link"),y=c("newCategoryModal");return d(),i(f,null,[e("div",G,[e("div",q,[F,e("div",K,[e("div",L,[e("div",J,[u(v,{class:"w-6 h-6"}),O(e("input",{type:"search",placeholder:"Search",onKeyup:s[0]||(s[0]=(...t)=>r.searchbyTitle&&r.searchbyTitle(...t)),"onUpdate:modelValue":s[1]||(s[1]=t=>a.searchQuery=t),class:"w-full h-full border-0 focus:outline-none focus:border-none focus:ring-0"},null,544),[[A,a.searchQuery]])]),e("button",{class:"flex justify-center w-36 h-full min-h-full bg-red-600 hover:bg-red-800 p-2 text-center md:p-5 text-white",onClick:s[2]||(s[2]=(...t)=>r.AddTags&&r.AddTags(...t))}," Add New")]),e("div",H,[R,e("div",W,[(d(!0),i(f,null,I(a.tagsData,(t,D)=>(d(),i("div",{class:"hover:bg-gray-50",key:D},[e("div",{class:"flex justify-between px-5 md:px-10 relative items-center cursor-pointer",onClick:b=>r.EditTags(t.id,t.title,t.description)},[e("div",Y,[e("h2",Z,[_(m(t.title)+" ",1),e("span",ee,m(r.getPostCount(t.id)),1)]),e("p",te,m(new Date(t.date_added).toDateString()),1)]),e("div",se,[u(T,{class:"w-6"}),e("div",oe,[ae,e("div",ne,[u(x,{to:{path:"/post",query:{action:"edit",type:"blog",pid:t.id}},class:"p-2 hover:bg-gray-50 rounded-md hover:shadow text-center align-middle flex w-full justify-center"},{default:E(()=>[_("Edit")]),_:2},1032,["to"]),r.getPostCount(t.id)?(d(),i("button",{key:0,onClick:w(b=>this.$router.push("/posts?tags="+t.title),["prevent"]),class:"p-2 flex w-full justify-center hover:bg-gray-50 rounded-md hover:shadow"},"View Posts",8,re)):p("",!0),e("button",{class:"p-2 w-full hover:bg-gray-50 rounded-md hover:shadow",onClick:w(b=>r.removeTags(t.id),["prevent"])},"Delete",8,de)])])])],8,X),le]))),128)),a.tagsData.length?p("",!0):(d(),i("div",ie,ge))])])]),he])]),a.modalOpened?(d(),V(y,{key:0,modelValue:a.newTagsData,"onUpdate:modelValue":s[3]||(s[3]=t=>a.newTagsData=t),action:a.tagsAction,modalTitle:"Add New Tag",onSaveData:r.addNewTags,onCloseModal:s[4]||(s[4]=t=>a.modalOpened=!a.modalOpened)},null,8,["modelValue","action","onSaveData"])):p("",!0)],64)}const ve=C(z,[["render",ue]]);export{ve as default};

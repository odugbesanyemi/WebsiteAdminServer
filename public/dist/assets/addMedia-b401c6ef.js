import{l as b}from"./loading-58ec714e.js";import{o as a,c as l,a as s,_ as k,D as M,M as U,b as p,H as c,r as d,t as n,K as g,f as u,h,F as D,i as C,e as f,g as L}from"./index-d2762744.js";function Q(t,e){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l4.5 4.5a.75.75 0 01-1.06 1.06l-3.22-3.22V16.5a.75.75 0 01-1.5 0V4.81L8.03 8.03a.75.75 0 01-1.06-1.06l4.5-4.5zM3 15.75a.75.75 0 01.75.75v2.25a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5V16.5a.75.75 0 011.5 0v2.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V16.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"})])}function F(t,e){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}const m=M(),z={components:{ArrowUpTrayIcon:Q,XMarkIcon:U,CheckIcon:F,Loading:b},data(){return{isDragging:!1,files:[],isLoading:!1,filesQuota:{},fileDetails:[],done:!1}},methods:{onChange(){this.files=[...this.$refs.file.files]},dragover(){this.isDragging=!0},dragleave(){this.isDragging=!this.isDragging},drop(t){t.preventDefault(),this.$refs.file.files=t.dataTransfer.files,this.onChange(),this.isDragging=!1},remove(t){this.files.splice(t,1)},generateURL(t){let e=URL.createObjectURL(t);return setTimeout(()=>{URL.revokeObjectURL(e)},1e3),e},getFilesMetrics(){p.get("https://bluvardadmin.onrender.com/files").then(t=>{this.fileDetails=t.data})},async uploadFiles(){c.start();let t=new FormData;for(let e=0;e<this.files.length;e++)t.append("files",this.files[e]);this.isLoading=!0;try{await p.post("https://bluvardadmin.onrender.com/uploadImages",t,{}).then(e=>{this.files=[],this.isLoading=!1,m.setToast("images Added Successfully"),c.done(),this.done=!0}).catch(e=>{this.done=!1,this.isLoading=!1,m.setToast("Error! couldn't complete your request. Try again."),c.done()})}catch(e){console.log(e)}},getFilesQuota(){p.get("https://bluvardadmin.onrender.com/files/quota").then(t=>{this.filesQuota=t.data})}},computed:{totalQuotaUsed(){return this.fileDetails.reduce((t,e)=>t+e.size,0)/Math.pow(10,6)},documentQuotaUsed(){return this.fileDetails.reduce((t,e)=>e.mime_type.split("/")[0]=="application"?t+e.size:t,0)/Math.pow(10,6)},videoQuotaUsed(){return this.fileDetails.reduce((t,e)=>e.mime_type.split("/")[0]=="video"?t+e.size:t,0)/Math.pow(10,6)},imageQuotaUsed(){return this.fileDetails.reduce((t,e)=>e.mime_type.split("/")[0]=="image"?t+e.size:t,0)/Math.pow(10,6)},otherQuotaUsed(){return this.fileDetails.reduce((t,e)=>e.mime_type.split("/")[0]!="image"&&e.mime_type.split("/")[0]!="application"&&e.mime_type.split("/")[0]!="video"?t+e.size:t,0)/Math.pow(10,6)},freeQuota(){return(this.filesQuota.quota-this.totalQuotaUsed)/Math.pow(10,6)}},updated(){this.$emit("done",this.done)},mounted(){this.getFilesQuota(),this.getFilesMetrics()}},I={class:"bg-gray-50 min-h-screen"},T={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-5 relative"},B=s("span",{class:"text-slate-500"},"Usage Limit: ",-1),j={class:"font-semibold"},R=s("span",{class:"text-slate-500 ml-5"},"Out of: ",-1),A={class:"font-semibold"},N={class:"my-4"},q=s("p",{class:"text-4xl block py-5 text-center"},"Drop Files to Upload",-1),O={for:"fileUpload"},S={class:"cursor-pointer flex items-center gap-3 p-3 border bg-white"},X={key:0},E={key:1,class:"flex gap-3"},H={key:0,class:"image_display flex flex-wrap gap-3 my-4 border-y py-5"},V=["src"],K={class:"overflow-clip text-sm flex items-center justify-center align-middle"},G={class:"text-slate-500 px-2 ml-1 border rounded-full bg-white"},J=s("span",{class:"text-sm text-slate-400 pt-3"},"Allowed file types: jpg, jpeg, png, gif, pdf, doc, ppt, odt, pptx, docx, pps, ppsx, xls, xlsx, key, webp, heic, heif, asc.",-1),P=s("span",{class:"py-5"},"Maximum Upload file size is : 150 MB",-1);function W(t,e,Y,Z,r,o){const _=d("ArrowUpTrayIcon"),v=d("XMarkIcon"),x=d("CheckIcon"),w=d("Loading");return a(),l("div",I,[s("div",T,[s("p",null,[B,s("span",j,n(o.totalQuotaUsed)+" MB",1),R,s("span",A,n(r.filesQuota.quota/Math.pow(10,6))+" MB",1)]),s("div",N,[s("label",{class:"border-dashed border-4 w-full p-5 flex flex-col justify-center items-center bg-white",for:"",onDragover:e[2]||(e[2]=g((...i)=>o.dragover&&o.dragover(...i),["prevent"])),onDragleave:e[3]||(e[3]=(...i)=>o.dragleave&&o.dragleave(...i)),onDrop:e[4]||(e[4]=(...i)=>o.drop&&o.drop(...i))},[q,s("input",{type:"file",name:"file",id:"fileUpload",multiple:"",class:"hidden",accept:".png,.pdf,.jpg,.mp4,.m4a",onChange:e[0]||(e[0]=(...i)=>o.onChange&&o.onChange(...i)),ref:"file"},null,544),s("label",O,[s("div",S,[r.isDragging?(a(),l("span",X,"Release to drop file here")):(a(),l("div",E,[u(_,{class:"w-6"}),h(" Click to Upload ")]))])]),r.files.length?(a(),l("div",H,[(a(!0),l(D,null,C(r.files,(i,y)=>(a(),l("div",{key:y,class:"w-36 border p-2 bg-white relative"},[s("img",{class:"preview-img",src:o.generateURL(i)},null,8,V),s("p",K,n(i.name)+"-"+n(Math.round(i.size/1e3)+"kb"),1),u(v,{onClick:g($=>o.remove(r.files.indexOf(i)),["prevent"]),class:"cursor-pointer w-5 bg-red-400 rounded-full absolute text-white top-0 -right-2 -translate-y-1/2"},null,8,["onClick"])]))),128))])):f("",!0),r.files.length?(a(),l("div",{key:1,onClick:e[1]||(e[1]=(...i)=>o.uploadFiles&&o.uploadFiles(...i)),class:"text-xs -top-15 relative bg-green-400 hover:bg-green-500 rounded-full px-3 py-2 text-white flex gap-1 items-center"},[u(x,{class:"w-4"}),h(" Upload Now "),s("span",G,n(r.files.length),1)])):f("",!0),J,P],32)]),r.isLoading?(a(),L(w,{key:0})):f("",!0)])])}const se=k(z,[["render",W]]);export{se as default};

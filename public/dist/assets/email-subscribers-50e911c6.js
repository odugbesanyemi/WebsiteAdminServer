import{m as w}from"./send-message-f0249515.js";import{p as I}from"./User-Profile-PNG-d107d593.js";import{o as r,c as n,a as e,_ as A,D as S,M as C,b as h,r as d,t as c,F as b,i as D,E as f,N as _,e as x,f as p}from"./index-d2762744.js";import{r as P}from"./PlusCircleIcon-9ffea543.js";import"./loading-58ec714e.js";import"./Editor-8afb130e.js";function N(o,t){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})])}const u=S(),V={components:{PlusCircleIcon:P,PaperAirplaneIcon:N,messageModal:w,XMarkIcon:C},data(){return{categorySelected:"published",userData:[],profile_icon:I,selectedItems:[],composeMessage:!1,checkedAll:!1,mailProgress:!1}},methods:{getAllSubscribers(){h.get("https://bluvardadmin.onrender.com/subscribers").then(o=>{this.userData=o.data}).catch(o=>{})},selectAll(){const o=[];if(o.length=this.selectedItems.length)this.selectedItems.length=0;else if(this.checkedAll){for(const t in this.userData)o.push(this.userData[t].email);this.selectedItems=o}else return 0},sendMessage(o){this.selectedItems=[o],this.composeMessage=!0},sendMail(o,t,i){if(o.length&&t&&i){this.mailProgress=!0;const m={recipients:o,subject:i,content:t};h.post("https://bluvardadmin.onrender.com/newsletter",m).then(s=>{this.mailProgress=!1,u.setToast("Mail Sent Successfully")}).catch(s=>{this.mailProgress=!1,u.setToast("Encountered an error. Please try later.")})}else u.setToast("kindly check that all required inputs are filled.")}},mounted(){this.getAllSubscribers()},computed:{}},B={class:"mt-5 border bg-white text-sm"},T={class:"header flex p-1 px-5 justify-between items-center"},j={class:"text-xs"},E={class:"py-1 rounded bg-gray-500 group px-1 flex items-center"},X=e("select",{name:"",class:"outline-none text-xs border-0 rounded p-1 bg-white/30 text-white/80 appearance-none bg-none",id:""},[e("option",{value:""},"Send Newsletter")],-1),z={class:"body border-t"},F=["for"],H=["value","id"],U={class:"black/70 text-xs pb-1"},q={class:"py-1 rounded bg-gray-500 shadow-lg group"},L=["onClick"],G={class:"px-5 py-2 bg-gray-100"},J=e("label",{for:"selectAll"},"select All",-1),K={class:"text-grey-500 ml-4"},O={key:0,class:"fixed inset-0 w-full h-full bg-black/20"},Q={key:1,class:"bg-white fixed w-full z-30 mx-auto top-0 left-1/2 -translate-x-1/2"},W={class:"header bg-blue-700 text-white text-sm p-2 flex flex-row justify-between items-center"},Y=e("span",null,"Compose Message",-1),Z={class:"controls"};function R(o,t,i,m,s,a){const v=d("PaperAirplaneIcon"),y=d("XMarkIcon"),M=d("messageModal");return r(),n(b,null,[e("div",B,[e("div",T,[e("p",j,c(s.userData.length)+" Subscriber"+c(s.userData.length>1?"s":""),1),e("div",E,[X,e("button",{class:"rounded text-sm px-3 text-slate-50 group-focus:ring-2 group-focus:ring-gray-500 hover:outline mx-2 outline-1 focus:outline",onClick:t[0]||(t[0]=l=>s.selectedItems.length?s.composeMessage=!s.composeMessage:"")},"Apply")])]),e("div",z,[(r(!0),n(b,null,D(s.userData,(l,k)=>(r(),n("div",{class:"flex px-5 py-5 justify-between gap-5 border-b items-center",key:k},[e("label",{class:"userdetails flex gap-4 items-center",for:l.id},[f(e("input",{type:"checkbox",value:l.email,class:"",id:l.id,"onUpdate:modelValue":t[1]||(t[1]=g=>s.selectedItems=g)},null,8,H),[[_,s.selectedItems]]),e("p",U,c(l.email),1)],8,F),e("div",q,[e("button",{class:"rounded text-xs px-3 text-slate-50 group-focus:ring-2 group-focus:ring-gray-500",onClick:g=>a.sendMessage(l.email)},[p(v,{class:"w-5"})],8,L)])]))),128)),e("div",G,[f(e("input",{type:"checkbox",name:"",id:"selectAll",class:"mr-3","onUpdate:modelValue":t[2]||(t[2]=l=>s.checkedAll=l),onChange:t[3]||(t[3]=l=>a.selectAll())},null,544),[[_,s.checkedAll]]),J,e("span",K,c(s.selectedItems.length)+" item"+c(s.selectedItems.length>1?"s":"")+" selected",1)])])]),s.composeMessage?(r(),n("span",O)):x("",!0),s.composeMessage?(r(),n("div",Q,[e("div",W,[Y,e("div",Z,[e("button",{class:"close",onClick:t[4]||(t[4]=l=>s.composeMessage=!s.composeMessage)},[p(y,{class:"w-8 p-1 border"})])])]),p(M,{class:"text-sm",recipients:s.selectedItems,onSubmitMail:a.sendMail,progress:s.mailProgress,type:"newsletter"},null,8,["recipients","onSubmitMail","progress"])])):x("",!0)],64)}const re=A(V,[["render",R]]);export{re as default};

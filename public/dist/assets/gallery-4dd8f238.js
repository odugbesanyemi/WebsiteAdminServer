import{_ as I,b as m,r as p,o as i,c,a as e,h as v,f as x,F as f,i as D,E as _,I as A,t as h,J as w,K as b,g as k,e as C,D as T,w as O}from"./index-d2762744.js";import{d as V}from"./documentIcon-3fbcb264.js";import{r as G}from"./XMarkIcon-360d76fa.js";import{r as E}from"./UsersIcon-5f224368.js";import{r as N}from"./EyeIcon-37d07741.js";import{r as j,a as S,b as U,c as P}from"./StarIcon-7804ba0b.js";import{r as B,a as z}from"./MagnifyingGlassIcon-ccde55fc.js";const L={components:{XMarkIcon:G},data(){return{allImages:[],selectedImage:"",documentImage:V}},methods:{getAllImages(){m.get("https://bluvardadmin.onrender.com/files").then(o=>{this.allImages=o.data,this.records=o.data})},showimage(o){return"https://bluvard.org/assets/"+o}},mounted(){this.getAllImages()},computed:{getImages(){return this.allImages.map(o=>"https://bluvard.org/assets/"+o)}}},X={class:"border"},F={class:"border-b p-3 w-full flex items-center justify-between text-gray-500"},q={class:"p-3 grid grid-cols-3 items-start h-72 overflow-y-auto"},J=["for"],K=["id","value","onClick"],Q=["src","alt"];function R(o,t,n,d,a,r){const y=p("XMarkIcon");return i(),c("div",X,[e("div",F,[v("All Images "),x(y,{class:"h-full w-6 bg-white rounded-full p-1 text-red-400 font-bold shadow cursor-pointer",onClick:t[0]||(t[0]=s=>o.$emit("close"))})]),e("div",q,[(i(!0),c(f,null,D(a.allImages,(s,u)=>(i(),c("label",{for:u,key:u},[_(e("input",{type:"radio",id:u,class:"hidden",value:s.file_name,"onUpdate:modelValue":t[1]||(t[1]=l=>a.selectedImage=l),onClick:l=>o.$emit("chooseImage",r.showimage(s.file_name))},null,8,K),[[A,a.selectedImage]]),e("img",{src:s.mime_type.split("/")[0]=="image"?r.showimage(s.file_name):a.documentImage,alt:s,class:"h-full border object-cover object-left hover:opacity-70"},null,8,Q)],8,J))),128))])])}const H=I(L,[["render",R]]),W={props:["modalTitle","modelValue","action"],components:{imageModal:H},data(){return{showImageModal:!1}},computed:{categoryData(){return this.modelValue}},mounted(){}},Y={class:"max-md:w-10/12 w-5/12 fixed rounded-lg bg-white md:p-10 p-5 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2"},Z={class:"text-2xl mb-10 text-gray-500"},ee=e("label",{for:"",class:"my-2"},"Description",-1),te=e("hr",{class:"my-5"},null,-1),oe={class:"btn-group flex justify-end gap-2"};function ae(o,t,n,d,a,r){const y=p("imageModal");return i(),c(f,null,[e("span",{class:"bg-black/30 backdrop-blur-lg fixed h-screen w-screen inset-0",onClick:t[0]||(t[0]=s=>o.$emit("closeModal"))}),e("div",Y,[e("h2",Z,h(n.modalTitle),1),e("div",null,[e("form",null,[_(e("input",{type:"text",class:"border p-2 w-full mb-4 text-sm rounded border-gray-300","onUpdate:modelValue":t[1]||(t[1]=s=>r.categoryData.category_name=s),placeholder:"Add Title"},null,512),[[w,r.categoryData.category_name]]),e("div",null,[ee,_(e("textarea",{name:"",id:"",class:"border resize-none w-full my-2 rounded border-gray-300","onUpdate:modelValue":t[2]||(t[2]=s=>r.categoryData.category_description=s),placeholder:"Description"},null,512),[[w,r.categoryData.category_description]])]),e("div",null,[_(e("input",{type:"url",class:"border p-2 w-full mb-4 rounded border-gray-300","onUpdate:modelValue":t[3]||(t[3]=s=>r.categoryData.category_image=s),placeholder:"Preview Image Link"},null,512),[[w,r.categoryData.category_image]]),e("button",{class:"px-3 py-1 bg-gray-100 text-gray-600 rounded text-xs",onClick:t[4]||(t[4]=b(s=>a.showImageModal=!a.showImageModal,["prevent"]))},"Select Image "),a.showImageModal?(i(),k(y,{key:0,class:"absolute top-1/2 right-0 bg-white -translate-y-1/2",onClose:t[5]||(t[5]=s=>a.showImageModal=!a.showImageModal),onChooseImage:t[6]||(t[6]=s=>{r.categoryData.category_image=s,a.showImageModal=!a.showImageModal})})):C("",!0)]),te,e("div",oe,[e("button",{class:"px-5 py-2 border rounded",onClick:t[7]||(t[7]=b(s=>o.$emit("closeModal"),["prevent"]))},"Cancel"),e("button",{class:"px-5 py-2 bg-gray-500 rounded hover:bg-gray-600 text-white",onClick:t[8]||(t[8]=b(s=>o.$emit("saveData",r.categoryData.title,r.categoryData.description),["prevent"]))},h(n.action),1)])])])])],64)}const se=I(W,[["render",ae]]),g=T(),re={components:{UsersIcon:E,EyeIcon:N,StarIcon:j,ListBulletIcon:S,ArrowTrendingDownIcon:U,ArrowTrendingUpIcon:P,MagnifyingGlassIcon:B,EllipsisVerticalIcon:z,newCategoryModal:se},data(){return{modalOpened:!1,modalTitle:"Add New Category",categoryData:[],searchQuery:"",categoryAction:"",newCategoryData:{category_name:"",category_description:"",category_image:""},selectedCategory:"",categoriesPosts:[]}},methods:{getGalleryCategories(){m.get("https://bluvardadmin.onrender.com/gallery/categories").then(o=>{this.categoryData=o.data}).catch(o=>{})},AddCategory(){this.categoryAction="Add",this.selectedCategory="",this.newCategoryData.category_name="",this.newCategoryData.category_description="",this.newCategoryData.category_image="",this.modalOpened=!this.modalOpened,this.modalTitle="Add New Category"},EditCategory(o,t,n,d){this.categoryAction="Edit",this.selectedCategory=o,this.newCategoryData.category_name=t,this.newCategoryData.category_description=n,this.newCategoryData.category_image=d,this.modalOpened=!this.modalOpened,this.modalTitle="Edit Category"},addNewGalleryCategory(o,t){const n=this.selectedCategory?this.selectedCategory:"";this.categoryAction=="Add"?m.post("https://bluvardadmin.onrender.com/gallery/categories",this.newCategoryData).then(d=>{this.modalOpened=!this.modalOpened,this.newCategoryData.title="",this.newCategoryData.description="",this.getGalleryCategories(),g.setToast("New category added.")}).catch(d=>{g.setToast(d.response.data)}):m.post(`https://bluvardadmin.onrender.com/gallery/categories/update/${n}`,this.newCategoryData).then(d=>{this.modalOpened=!this.modalOpened,this.getGalleryCategories(),g.setToast("Category successfully edited")}).catch(d=>{g.setToast(d.response.data)})},viewCategory(){this.modalOpened=!this.modalOpened},removeCategory(o){console.log(o),confirm("Do you want to Continue?")&&m.post(`https://bluvardadmin.onrender.com/gallery/categories/delete/${o}`).then(n=>{this.modalOpened=!this.modalOpened,this.getGalleryCategories(),g.setToast("Category removed successfully.")}).catch(n=>{g.setToast(n.response.data)})},async getGalleryImages(){const o=await m.get("https://bluvardadmin.onrender.com/gallery");this.categoriesPosts=o.data},getPostCount(o){return this.categoriesPosts.filter(n=>n.category_id==o).length}},mounted(){this.getGalleryCategories(),this.getGalleryImages(),document.title="Categories | Manage Gallery"}},le={class:"min-h-screen bg-gray-50"},ne={class:"content max-w-6xl mx-auto p-10 max-md:py-10 max-md:px-2"},de={class:"title p-3 bg-white border flex items-start justify-between"},ie=e("div",{class:"pr-4"},[e("p",{class:"font-medium text-xl text-gray-600"},"Gallery Settings"),e("p",{class:"py-2 text-slate-500 text-xs"},"Edit and manage the Gallery categories of your website")],-1),ce={class:""},ge={class:"mt-5 border bg-white"},me=e("div",{class:"header py-1 bg-white flex justify-between px-10 max-md:px-5 border-b items-center"},[e("p",{class:"py-3"},"Categories")],-1),ye={class:"posts"},ue={class:"flex justify-between px-5 md:px-10 relative items-center cursor-pointer"},pe=["onClick"],he={class:"text-xl py-1 text-black/80"},_e={class:"mx-3 border rounded-full bg-white px-2 text-xs"},be={class:"text-xs text-slate-500"},fe={class:"group"},we={class:"dropdown absolute rounded-lg -right-5 border top-18 transition-all bg-white shadow w-40 p-2 group-hover:block hidden z-10"},ve=e("span",{class:"before:absolute before:-z-10 before:w-6 before:h-6 before:bg-white before:-top-3 before:left-1/2 before:rotate-45 before:border-l before:border-t"},null,-1),xe={class:"z-20"},Ce=["onClick"],Ie=e("hr",null,null,-1),De={key:0,class:"nodata"},ke=e("h2",{class:"text-xl font-bold p-10"},"No Data Available!",-1),Me=[ke],$e=e("hr",{class:"mt-16"},null,-1);function Ae(o,t,n,d,a,r){const y=p("EllipsisVerticalIcon"),s=p("router-link"),u=p("newCategoryModal");return i(),c(f,null,[e("div",le,[e("div",ne,[e("div",de,[ie,e("button",{class:"flex whitespace-nowrap h-full bg-gray-400 rounded font-medium p-2 text-center text-sm text-gray-50",onClick:t[0]||(t[0]=(...l)=>r.AddCategory&&r.AddCategory(...l))}," Add New")]),e("div",ce,[e("div",ge,[me,e("div",ye,[(i(!0),c(f,null,D(a.categoryData,(l,M)=>(i(),c("div",{class:"hover:bg-gray-50",key:M},[e("div",ue,[e("div",{class:"py-3 w-full",onClick:$=>r.EditCategory(l.id,l.category_name,l.category_description,l.category_image)},[e("h2",he,[v(h(l.category_name)+" ",1),e("span",_e,h(r.getPostCount(l.id)),1)]),e("p",be,h(new Date(l.date).toDateString()),1)],8,pe),e("div",fe,[x(y,{class:"w-10 p-1 rounded-full hover:bg-gray-200"}),e("div",we,[ve,e("div",xe,[x(s,{to:{path:`/media/gallery/${l.id}`,query:{category:`${l.category_name}`}},class:"flex w-full p-2 hover:shadow hover:bg-gray-100 rounded whitespace-nowrap text-sm text-center align-middle justify-center"},{default:O(()=>[v(" Manage Images")]),_:2},1032,["to"]),e("button",{class:"p-2 w-full hover:bg-gray-100 text-sm rounded-md hover:shadow",onClick:b($=>r.removeCategory(l.id),["prevent"])},"Delete",8,Ce)])])])]),Ie]))),128)),a.categoryData.length?C("",!0):(i(),c("div",De,Me))])])]),$e])]),a.modalOpened?(i(),k(u,{key:0,modelValue:a.newCategoryData,"onUpdate:modelValue":t[1]||(t[1]=l=>a.newCategoryData=l),action:a.categoryAction,modalTitle:a.modalTitle,onSaveData:r.addNewGalleryCategory,onCloseModal:t[2]||(t[2]=l=>a.modalOpened=!a.modalOpened)},null,8,["modelValue","action","modalTitle","onSaveData"])):C("",!0)],64)}const Se=I(re,[["render",Ae]]);export{Se as default};
